<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta content="telephone=no" name="format-detection"><title>vue快速搭建</title><link rel="stylesheet" href="../static/css/reset.css"><link rel="stylesheet" href="../static/css/style.css"><link rel="stylesheet" href="../static/css/animate.min.css"><script src="../static/js/sea.js"></script><script src="../static/js/sea_config.js"></script><script>function rem(){var e=document.documentElement.clientWidth,t=document.documentElement;1024<e&&(e=1024,t.style.maxWidth="1024px",t.style.margin="0 auto"),t.style.fontSize=e/7.5+"px"}rem(),window.addEventListener("resize",function(){rem()},!1)</script></head><body><style>#app{font-size:.24rem}ul li{list-style-type:none}.hide{display:none}span{min-width:.5rem;display:inline-block;height:.3rem;line-height:.3rem}.a{border:1px solid #000;width:2rem;height:2rem}::-webkit-scrollbar{-webkit-appearance:none}::-webkit-scrollbar:vertical{width:12px}::-webkit-scrollbar:horizontal{height:12px}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.5);border-radius:10px;border:2px solid #fff}::-webkit-scrollbar-track{border-radius:10px;background-color:#fff}</style><div id="app"><div class="a" style="overflow:auto;width:300px;height:300px;-webkit-appearance:none"><span v-for="l in list" v-text="l.name" style="display:block"></span></div><div><input type="text" v-model="val"><input type="button" value="发送" @click="tijiao"></div></div><script>seajs.use(["vue","jquery","socket"],function(){var t=io("ws://192.168.1.101:8081");vue1=new Vue({el:"#app",data:{val:"",list:[],d:"",a:!0,c:!0},mounted:function(){var o=this;o.$nextTick(function(){console.log(t),t.on("hehe",function(n){}),t.on("list",function(n){vue1.list.length<n.length&&(o.c=!0),vue1.list=n,o.d=vue1.list.length,o.c&&o.$nextTick(function(){$(".a").scrollTop($(".a")[0].scrollHeight)})}),t.on("disconnect",function(n){console.log("断开链接")})})},methods:{tijiao:function(){var n=this;n.val&&(t.emit("send",n.val),n.list.push({name:n.val})),n.$nextTick(function(){$(".a").scrollTop($(".a")[0].scrollHeight)})}},watch:{list:function(n,o){console.log(n.length,1235456,this.d);var t=this;console.log(n.length,this.d,707070),1==t.a&&(console.log(12346),t.$nextTick(function(){$(".a").scrollTop($(".a")[0].scrollHeight)}),t.a=!1)}},updated:function(){this.$nextTick(function(){})}}),$(".a").scroll(function(n){$(this).scrollTop($(this).scrollTop()),vue1.c=!1})})</script><script type="text/javascript" src="../js/common754554c1.js?"></script></body></html>